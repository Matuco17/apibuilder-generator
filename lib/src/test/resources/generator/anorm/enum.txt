import anorm._

package test.apidoc.apidoctest.v0.anorm.parsers {

  object Status {

    TODO

    def newParser(name: String) = parser(name)

    def parserByTable(table: String) = parser(s"$table.status")

    def parser(name: String): RowParser[test.apidoc.apidoctest.v0.models.Status] = {
      SqlParser.str(name) map {
        case value => test.apidoc.apidoctest.v0.models.Status(value)
      }
    }

  }


  object User {

    case class Mappings(
      guid: String = "guid"
      status: String = "status"
    )

    object Mappings {

      def table(table: String) = prefix(Some(s"$table."))

      def prefix(prefix: Option[String]) = Mappings(
        guid = s"${prefix.getOrElse("")}guid",
        status = s"${prefix.getOrElse("")}status"
      )

    }

    def table(table: String) = parser(Mappings.prefix(table))

    def parser(mappings: Mappings): RowParser[test.apidoc.apidoctest.v0.models.User] = {
      SqlParser.get[_root_.java.util.UUID](mappings.guid) ~
      test.apidoc.apidoctest.v0.anorm.parsers.Status.Parsers.parser(mappings.status) map {
        case guid ~ status => {
          test.apidoc.apidoctest.v0.models.User(
            guid = guid,
            status = status
          )
        }
      }
    }

  }

}